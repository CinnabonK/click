<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smooth Image Transition</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #fff;
        }

        #container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        img {
            position: absolute;
            width: 0;
            height: auto;
            transition: width 0.5s ease-in-out; /* スムーズな拡大縮小 */
            display: none;
        }
    </style>
</head>
<body>
    <div id="container">
        <!-- 画像50個を準備 -->
        <img src="image1.jpg" alt="Image 1">
        <img src="image2.jpg" alt="Image 2">
        <img src="image3.jpg" alt="Image 3">
        <!-- 他の画像も追加 -->
    </div>

    <script>
        const images = document.querySelectorAll("img");
        const container = document.getElementById("container");
        let currentIndex = 0;
        let scale = 0;
        let isTransitioning = false; // 切り替え中かどうかを示すフラグ

        // 初期化: 最初の画像だけ表示
        images[currentIndex].style.display = "block";
        images[currentIndex].style.width = "0";

        // マウスホイールの動作を監視
        window.addEventListener("wheel", function(event) {
            if (isTransitioning) return; // 切り替え中は新しいイベントを無視

            const delta = Math.sign(event.deltaY); // スクロール方向取得
            const speedFactor = Math.abs(event.deltaY) * 0.1; // スクロール速度に応じた拡大速度
            scale += delta * speedFactor;

            // スケールの制御: 0から100の範囲に制限
            if (scale < 0) scale = 0;
            if (scale > 100) scale = 100;

            // 画像のスケールを適用
            images[currentIndex].style.width = scale + "vw";

            // スケールが100に達したら次の画像へ切り替え
            if (scale >= 100) {
                isTransitioning = true; // 切り替えフラグをオン
                images[currentIndex].style.display = "none"; // 現在の画像を非表示
                currentIndex = (currentIndex + 1) % images.length; // 次の画像へ
                scale = 0; // スケールをリセット

                // 次の画像を準備して表示
                const nextImage = images[currentIndex];
                nextImage.style.width = "0"; // 初期状態は0幅
                nextImage.style.display = "block"; // 表示
                setTimeout(() => {
                    nextImage.style.width = scale + "vw"; // 0から拡大
                    isTransitioning = false; // 切り替え完了後にフラグを解除
                }, 10); // 短い遅延を入れてtransitionを適用
            }
        });
    </script>
</body>
</html>
