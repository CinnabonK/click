<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smooth Infinite Image Scaling</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #fff;
        }

        #container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        img {
            position: absolute;
            width: 0;
            height: auto;
            transition: width 0.5s ease-in-out; /* スムーズな拡大縮小 */
            z-index: 1; /* デフォルトでは1 */
        }
    </style>
</head>
<body>
    <div id="container">
        <!-- 画像50個を準備 -->
        <img src="image1.jpg" alt="Image 1">
        <img src="image2.jpg" alt="Image 2">
        <img src="image3.jpg" alt="Image 3">
        <!-- 他の画像も追加 -->
    </div>

    <script>
        const images = document.querySelectorAll("img");
        const container = document.getElementById("container");
        let currentIndex = 0;
        let scale = 0;
        let isTransitioning = false; // 切り替え中かどうかのフラグ
        let zIndexCounter = 1; // z-indexの管理

        // 初期化: 最初の画像だけ表示
        images[currentIndex].style.display = "block";
        images[currentIndex].style.width = "0";
        images[currentIndex].style.zIndex = zIndexCounter;

        // マウスホイールの動作を監視
        window.addEventListener("wheel", function(event) {
            if (isTransitioning) return; // 切り替え中は新しいイベントを無視

            const delta = Math.sign(event.deltaY); // スクロール方向取得
            const speedFactor = Math.abs(event.deltaY) * 0.1; // スクロール速度に応じた拡大速度
            scale += delta * speedFactor;

            // スケールが0未満、または100を超えないようにする
            if (scale < 0) {
                scale = 0;
                currentIndex = (currentIndex - 1 + images.length) % images.length; // 逆方向に移動
                const prevImage = images[currentIndex];
                zIndexCounter++;
                prevImage.style.zIndex = zIndexCounter; // 最前面に移動
                prevImage.style.display = "block";
                prevImage.style.width = scale + "vw"; // 拡大の初期化
            } else if (scale > 100) {
                scale = 0; // スケールをリセット
                currentIndex = (currentIndex + 1) % images.length; // 順方向に移動
                const nextImage = images[currentIndex];
                zIndexCounter++;
                nextImage.style.zIndex = zIndexCounter; // 最前面に移動
                nextImage.style.display = "block"; // 次の画像を表示
                nextImage.style.width = scale + "vw"; // 拡大の初期化
            }

            // 現在の画像を拡大
            images[currentIndex].style.width = scale + "vw";
        });
    </script>
</body>
</html>
